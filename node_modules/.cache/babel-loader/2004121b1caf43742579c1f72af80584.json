{"remainingRequest":"/Users/kscit/Documents/study/my-vue-example/node_modules/babel-loader/lib/index.js!/Users/kscit/Documents/study/my-vue-example/node_modules/eslint-loader/index.js??ref--13-0!/Users/kscit/Documents/study/my-vue-example/src/view/canvas/arrowLayer.js","dependencies":[{"path":"/Users/kscit/Documents/study/my-vue-example/src/view/canvas/arrowLayer.js","mtime":1586666131880},{"path":"/Users/kscit/Documents/study/my-vue-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscit/Documents/study/my-vue-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscit/Documents/study/my-vue-example/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _slicedToArray from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"/Users/kscit/Documents/study/my-vue-example/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport BaseCanvas from \"./baseCanvas\";\nimport { calcArrowH } from \"./util\";\n\nvar ArrowLayers =\n/*#__PURE__*/\nfunction (_BaseCanvas) {\n  _inherits(ArrowLayers, _BaseCanvas);\n\n  function ArrowLayers(_ref) {\n    var _this;\n\n    var canvas = _ref.canvas,\n        layersOptions = _ref.layersOptions;\n\n    _classCallCheck(this, ArrowLayers);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrowLayers).call(this, canvas));\n\n    _defineProperty(_assertThisInitialized(_this), \"_initOn\", function () {\n      _this._on('eidtEnd', _this.eidtEnd, _assertThisInitialized(_this));\n\n      _this._on('drawEnd', _this.drawEnd, _assertThisInitialized(_this));\n\n      _this._on('setCheckedInfo', _this.setCheckedInfo, _assertThisInitialized(_this));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"eidtEnd\", function () {});\n\n    _defineProperty(_assertThisInitialized(_this), \"drawEnd\", function (type, coordinates, coordinate) {\n      if (type == _this._type) {\n        _this.imageDargEndCallback(coordinates, coordinate);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCheckedInfo\", function (info) {\n      if (info) {\n        var type = info.type,\n            pathId = info.pathId;\n\n        if (type == _this._type) {\n          _this.checkedIndex = pathId;\n        } else {\n          _this.checkedIndex = -1;\n        }\n      } else {\n        _this.checkedIndex = -1;\n      }\n\n      _this.drawArrow();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_drawArrow\", function (loc1, loc2) {\n      var strokeFlag = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      if (loc1 && loc2) {\n        // 绘制直线\n        _this._context.lineWidth = 5;\n\n        _this._context.beginPath();\n\n        _this._context.moveTo(loc1[0], loc1[1]);\n\n        _this._context.lineTo(loc2[0], loc2[1]); // 绘制箭头\n\n\n        var _calcArrowH = calcArrowH(loc1, loc2),\n            _calcArrowH2 = _slicedToArray(_calcArrowH, 2),\n            h1 = _calcArrowH2[0],\n            h2 = _calcArrowH2[1];\n\n        _this._context.moveTo(h1[0], h1[1]);\n\n        _this._context.lineTo(loc2[0], loc2[1]);\n\n        _this._context.lineTo(h2[0], h2[1]);\n\n        if (strokeFlag) {\n          _this._context.strokeStyle = _this.strokeColor;\n\n          _this._context.stroke();\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_drawCheckedArrow\", function (loc1, loc2) {\n      if (loc1 && loc2) {\n        // 绘制直线\n        _this._context.lineWidth = 5;\n\n        _this._context.beginPath();\n\n        _this._context.moveTo(loc1[0], loc1[1]);\n\n        _this._context.lineTo(loc2[0], loc2[1]); // 绘制箭头\n\n\n        var _calcArrowH3 = calcArrowH(loc1, loc2),\n            _calcArrowH4 = _slicedToArray(_calcArrowH3, 2),\n            h1 = _calcArrowH4[0],\n            h2 = _calcArrowH4[1];\n\n        _this._context.moveTo(h1[0], h1[1]);\n\n        _this._context.lineTo(loc2[0], loc2[1]);\n\n        _this._context.lineTo(h2[0], h2[1]);\n\n        _this._context.strokeStyle = _this.strokeColor;\n\n        _this._context.stroke();\n\n        _this._context.save();\n\n        _this._context.lineWidth = 2;\n        _this._context.strokeColor = _this.fillColor;\n        _this._context.fillColor = _this.strokeColor;\n\n        _this._drawCircle(loc1, _this.strokeColor, _this.fillColor);\n\n        _this._drawCircle(loc2, _this.strokeColor, _this.fillColor);\n\n        _this._drawCircle(h1, _this.strokeColor, _this.fillColor);\n\n        _this._drawCircle(h2, _this.strokeColor, _this.fillColor);\n\n        _this._context.restore();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"drawArrow\", function (loc) {\n      var coordinates = _this.coordinates || [];\n      var coordinate = _this.coordinate || [];\n      coordinates && coordinates.forEach(function (val) {\n        var paths = val.paths || [];\n        var pathId = val.pathId;\n\n        var _ref2 = paths || [],\n            _ref3 = _slicedToArray(_ref2, 2),\n            loc1 = _ref3[0],\n            loc2 = _ref3[1];\n\n        if (_this.checkedIndex == pathId) {\n          _this._drawCheckedArrow(loc1, loc2);\n        } else {\n          _this._drawArrow(loc1, loc2);\n        }\n      });\n\n      if (coordinate) {\n        if (coordinate.length == 1 && loc) {\n          _this._drawArrow(coordinate[0], loc);\n        } else if (coordinate.length == 2) {\n          _this._drawArrow(coordinate[0], coordinate[1]);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseDown\", function (coordinates, coordinate, pos) {\n      _this.coordinates = _this.formateCoordinatesScale(coordinates);\n      _this.coordinate = _this.formateCoordinateScale(coordinate);\n\n      _this._emit('addLocToCoordinate', pos);\n\n      _this.drawArrow(pos);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseMove\", function (coordinates, coordinate, pos) {\n      _this.coordinates = _this.formateCoordinatesScale(coordinates);\n      _this.coordinate = _this.formateCoordinateScale(coordinate);\n\n      _this.drawArrow(pos);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseMoveDrag\", function (coordinates, coordinate, pos) {\n      _this.coordinates = _this.formateCoordinatesScale(coordinates);\n      _this.coordinate = _this.formateCoordinateScale(coordinate);\n\n      _this.drawArrow(pos);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"imageDargEndCallback\", function () {\n      var coordinates = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var coordinate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      _this.coordinates = _this.formateCoordinatesScale(coordinates);\n      _this.coordinate = _this.formateCoordinateScale(coordinate);\n\n      _this.drawArrow();\n    });\n\n    if (canvas) {\n      _this.threshold = 10;\n      _this.arrowLength = 20;\n      _this.theta = 30;\n      _this.editFlag = false;\n      _this._type = 'arrow';\n      _this.editPos = {};\n      _this.coordinate = [];\n      _this.coordinates = [];\n      _this.checkedIndex = -1;\n\n      _this._initOn();\n\n      _this.initCanvasOptions(canvas, layersOptions);\n    }\n\n    return _this;\n  }\n\n  _createClass(ArrowLayers, [{\n    key: \"_isPointInPath\",\n\n    /**\n     * return 返回当前点是否在路径中(路径中)\n     * @param {*} coordinates \n     * @param {*} currentPoint \n     */\n    value: function _isPointInPath(coordinates, currentPoint) {\n      for (var i = coordinates.length - 1; i > -1; --i) {\n        var paths = coordinates[i].paths || [];\n\n        if (this.judgeDotIsInPath(currentPoint, paths, this.threshold)) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n  }]);\n\n  return ArrowLayers;\n}(BaseCanvas);\n\nexport default ArrowLayers;",{"version":3,"sources":["/Users/kscit/Documents/study/my-vue-example/src/view/canvas/arrowLayer.js"],"names":["BaseCanvas","calcArrowH","ArrowLayers","canvas","layersOptions","_on","eidtEnd","drawEnd","setCheckedInfo","type","coordinates","coordinate","_type","imageDargEndCallback","info","pathId","checkedIndex","drawArrow","loc1","loc2","strokeFlag","_context","lineWidth","beginPath","moveTo","lineTo","h1","h2","strokeStyle","strokeColor","stroke","save","fillColor","_drawCircle","restore","loc","forEach","val","paths","_drawCheckedArrow","_drawArrow","length","pos","formateCoordinatesScale","formateCoordinateScale","_emit","threshold","arrowLength","theta","editFlag","editPos","_initOn","initCanvasOptions","currentPoint","i","judgeDotIsInPath"],"mappings":"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","sourcesContent":["import BaseCanvas from './baseCanvas';\n\nimport { calcArrowH } from './util';\n\nclass ArrowLayers extends BaseCanvas {\n    constructor({ canvas, layersOptions }) {\n        super(canvas);\n        if (canvas) {\n            this.threshold = 10;\n            this.arrowLength = 20;\n            this.theta = 30;\n            this.editFlag = false;\n            this._type = 'arrow';\n            this.editPos = {};\n            this.coordinate = [];\n            this.coordinates = [];\n            this.checkedIndex = -1;\n            this._initOn();\n            this.initCanvasOptions(canvas, layersOptions);\n        }\n    }\n\n    _initOn = () => {\n        this._on('eidtEnd', this.eidtEnd, this);\n        this._on('drawEnd', this.drawEnd, this);\n        this._on('setCheckedInfo', this.setCheckedInfo, this);\n    };\n\n    eidtEnd = () => { };\n    drawEnd = (type, coordinates, coordinate) => {\n        if (type == this._type) {\n            this.imageDargEndCallback(coordinates, coordinate);\n        }\n    };\n    setCheckedInfo = info => {\n        if (info) {\n            const { type, pathId } = info;\n            if (type == this._type) {\n                this.checkedIndex = pathId;\n            } else {\n                this.checkedIndex = -1;\n            }\n        } else {\n            this.checkedIndex = -1;\n        }\n\n        this.drawArrow();\n    };\n\n    _drawArrow = (loc1, loc2, strokeFlag = true) => {\n        if (loc1 && loc2) {\n            // 绘制直线\n            this._context.lineWidth = 5;\n            this._context.beginPath();\n            this._context.moveTo(loc1[0], loc1[1]);\n            this._context.lineTo(loc2[0], loc2[1]);\n            // 绘制箭头\n\n            const [h1, h2] = calcArrowH(loc1, loc2);\n\n            this._context.moveTo(h1[0], h1[1]);\n            this._context.lineTo(loc2[0], loc2[1]);\n\n            this._context.lineTo(h2[0], h2[1]);\n            if (strokeFlag) {\n                this._context.strokeStyle = this.strokeColor;\n                this._context.stroke();\n            }\n        }\n    };\n\n    _drawCheckedArrow = (loc1, loc2) => {\n        if (loc1 && loc2) {\n            // 绘制直线\n            this._context.lineWidth = 5;\n            this._context.beginPath();\n            this._context.moveTo(loc1[0], loc1[1]);\n            this._context.lineTo(loc2[0], loc2[1]);\n            // 绘制箭头\n\n            const [h1, h2] = calcArrowH(loc1, loc2);\n\n            this._context.moveTo(h1[0], h1[1]);\n            this._context.lineTo(loc2[0], loc2[1]);\n\n            this._context.lineTo(h2[0], h2[1]);\n            this._context.strokeStyle = this.strokeColor;\n            this._context.stroke();\n            this._context.save();\n            this._context.lineWidth = 2;\n            this._context.strokeColor = this.fillColor;\n            this._context.fillColor = this.strokeColor;\n            this._drawCircle(loc1, this.strokeColor, this.fillColor);\n            this._drawCircle(loc2, this.strokeColor, this.fillColor);\n            this._drawCircle(h1, this.strokeColor, this.fillColor);\n            this._drawCircle(h2, this.strokeColor, this.fillColor);\n            this._context.restore();\n        }\n    };\n\n    /**\n     * return 返回当前点是否在路径中(路径中)\n     * @param {*} coordinates \n     * @param {*} currentPoint \n     */\n    _isPointInPath(coordinates, currentPoint) {\n        for (let i = coordinates.length - 1; i > -1; --i) {\n            const paths = coordinates[i].paths || [];\n            if (this.judgeDotIsInPath(currentPoint, paths, this.threshold)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    drawArrow = loc => {\n        const coordinates = this.coordinates || [];\n        const coordinate = this.coordinate || [];\n        coordinates &&\n            coordinates.forEach(val => {\n                const paths = val.paths || [];\n                const pathId = val.pathId;\n                const [loc1, loc2] = paths || [];\n                if (this.checkedIndex == pathId) {\n                    this._drawCheckedArrow(loc1, loc2);\n                } else {\n                    this._drawArrow(loc1, loc2);\n                }\n            });\n\n        if (coordinate) {\n            if (coordinate.length == 1 && loc) {\n                this._drawArrow(coordinate[0], loc);\n            } else if (coordinate.length == 2) {\n                this._drawArrow(coordinate[0], coordinate[1]);\n            }\n        }\n    };\n\n    mouseDown = (coordinates, coordinate, pos) => {\n        this.coordinates = this.formateCoordinatesScale(coordinates);\n        this.coordinate = this.formateCoordinateScale(coordinate);\n        this._emit('addLocToCoordinate', pos);\n        this.drawArrow(pos);\n    };\n    mouseMove = (coordinates, coordinate, pos) => {\n        this.coordinates = this.formateCoordinatesScale(coordinates);\n        this.coordinate = this.formateCoordinateScale(coordinate);\n        this.drawArrow(pos);\n    };\n\n    mouseMoveDrag = (coordinates, coordinate, pos) => {\n        this.coordinates = this.formateCoordinatesScale(coordinates);\n        this.coordinate = this.formateCoordinateScale(coordinate);\n        this.drawArrow(pos);\n    };\n\n    imageDargEndCallback = (coordinates = [], coordinate = []) => {\n        this.coordinates = this.formateCoordinatesScale(coordinates);\n        this.coordinate = this.formateCoordinateScale(coordinate);\n        this.drawArrow();\n    };\n}\n\nexport default ArrowLayers;\n"]}]}